@use 'variables' as *;
@use 'mixins' as *;

.pd {
  padding-top: 5rem; // navbar height

  // ── Breadcrumb ─────────────────────────────────────────
  &__breadcrumb {
    @include container;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding-top: $space-6;
    padding-bottom: $space-4;
    font-size: $fs-sm;
    color: $text-muted-light;
    flex-wrap: wrap;

    :host-context(.dark) & { color: $text-muted-dark; }

    a {
      &:hover { color: $primary; :host-context(.dark) & { color: $secondary; } }
    }

    .material-icons-outlined { font-size: 1rem; }
  }

  &__breadcrumb-current {
    color: #111;
    font-weight: 600;
    :host-context(.dark) & { color: #fff; }
  }

  // ── Main Layout ────────────────────────────────────────
  &__main {
    @include container;
    display: grid;
    grid-template-columns: 1fr;
    gap: $space-10;
    padding-bottom: $space-16;

    @include respond($bp-md) {
      grid-template-columns: 1fr 1fr;
      gap: $space-12;
    }
  }

  // ── Image Section ──────────────────────────────────────
  &__image-section {
    position: relative;
  }

  &__image-hero {
    border-radius: $radius-2xl;
    overflow: hidden;
    background: #f5f0ea;
    position: relative;

    :host-context(.dark) & { background: $surface-dark-alt; }
  }

  &__hero-img {
    width: 100%;
    height: auto;
    min-height: 300px;
    max-height: 500px;
    object-fit: cover;
    display: block;

    @include respond($bp-md) { min-height: 400px; }
    @include respond($bp-lg) { min-height: 500px; }
  }

  &__badge {
    position: absolute;
    top: $space-4;
    left: $space-4;
    background: $secondary;
    color: $primary;
    font-size: $fs-xs;
    font-weight: 700;
    padding: $space-1 $space-4;
    border-radius: $radius-full;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  // ── Info Section ───────────────────────────────────────
  &__info-section {
    display: flex;
    flex-direction: column;
    gap: $space-4;
  }

  &__category {
    color: $primary;
    font-size: $fs-sm;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    :host-context(.dark) & { color: $secondary; }
  }

  &__name {
    font-family: $font-display;
    font-size: $fs-3xl;
    font-weight: 700;
    color: #111;
    line-height: 1.2;
    :host-context(.dark) & { color: #fff; }

    @include respond($bp-lg) { font-size: $fs-4xl; }
  }

  // ── Rating ─────────────────────────────────────────────
  &__rating {
    display: flex;
    align-items: center;
    gap: $space-1;
  }

  &__star {
    font-size: 1.1rem;
    color: $secondary;
  }

  &__rating-value {
    font-weight: 700;
    margin-left: $space-2;
    color: #111;
    :host-context(.dark) & { color: #fff; }
  }

  &__rating-count {
    font-size: $fs-sm;
    color: $text-muted-light;
    :host-context(.dark) & { color: $text-muted-dark; }
  }

  // ── Price ──────────────────────────────────────────────
  &__price-row {
    display: flex;
    align-items: baseline;
    gap: $space-3;
    flex-wrap: wrap;
  }

  &__price {
    font-size: $fs-3xl;
    font-weight: 800;
    color: $primary;
    :host-context(.dark) & { color: $secondary; }
  }

  &__price-original {
    font-size: $fs-lg;
    color: $text-muted-light;
    text-decoration: line-through;
    :host-context(.dark) & { color: $text-muted-dark; }
  }

  &__discount {
    background: rgba($success, 0.12);
    color: $success;
    font-size: $fs-sm;
    font-weight: 700;
    padding: $space-1 $space-3;
    border-radius: $radius-full;
  }

  // ── Stock ──────────────────────────────────────────────
  &__stock {
    display: flex;
    align-items: center;
    gap: $space-2;
    font-size: $fs-sm;
    font-weight: 600;
    color: $success;

    .material-icons-outlined { font-size: 1.1rem; }

    &--out { color: $error; }
  }

  // ── Description ────────────────────────────────────────
  &__description {
    color: $text-muted-light;
    line-height: 1.8;
    font-size: $fs-base;
    :host-context(.dark) & { color: $text-muted-dark; }
  }

  // ── Highlights ─────────────────────────────────────────
  &__highlights {
    border: 1px solid $border-light;
    border-radius: $radius-xl;
    padding: $space-5;

    :host-context(.dark) & { border-color: rgba(255, 255, 255, 0.08); }
  }

  &__highlights-title {
    font-family: $font-display;
    font-size: $fs-lg;
    font-weight: 700;
    color: #111;
    margin-bottom: $space-3;
    :host-context(.dark) & { color: #fff; }
  }

  &__highlights-list {
    list-style: none;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: $space-3;

    li {
      display: flex;
      align-items: center;
      gap: $space-2;
      font-size: $fs-sm;
      color: $text-muted-light;
      :host-context(.dark) & { color: $text-muted-dark; }

      .material-icons-outlined {
        font-size: 1.1rem;
        color: $primary;
        :host-context(.dark) & { color: $secondary; }
      }
    }
  }

  // ── Quantity ────────────────────────────────────────────
  &__qty-section {
    display: flex;
    align-items: center;
    gap: $space-4;
  }

  &__qty-label {
    font-weight: 600;
    color: #111;
    :host-context(.dark) & { color: #fff; }
  }

  &__qty-control {
    display: flex;
    align-items: center;
    border: 1px solid $border-light;
    border-radius: $radius-md;
    overflow: hidden;

    :host-context(.dark) & { border-color: rgba(255, 255, 255, 0.1); }
  }

  &__qty-btn {
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    cursor: pointer;
    color: #111;
    transition: background $transition-fast;
    :host-context(.dark) & { color: #fff; }

    &:hover { background: rgba($primary, 0.06); }

    .material-icons-outlined { font-size: 1.1rem; }
  }

  &__qty-value {
    width: 3rem;
    text-align: center;
    font-weight: 700;
    font-size: $fs-lg;
    color: #111;
    :host-context(.dark) & { color: #fff; }
  }

  // ── Action Buttons ─────────────────────────────────────
  &__actions {
    display: flex;
    gap: $space-4;

    @media (max-width: 480px) {
      flex-direction: column;
    }
  }

  &__btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $space-2;
    padding: $space-4 $space-6;
    border-radius: $radius-full;
    font-weight: 700;
    font-size: $fs-base;
    cursor: pointer;
    transition: all $transition-fast;
    border: none;

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    &--cart {
      background: transparent;
      border: 2px solid $primary;
      color: $primary;

      :host-context(.dark) & {
        border-color: $secondary;
        color: $secondary;
      }

      &:hover:not(:disabled) {
        background: rgba($primary, 0.06);
        transform: translateY(-2px);
      }
    }

    &--buy {
      background: $primary;
      color: #fff;
      box-shadow: $shadow-lg;

      :host-context(.dark) & {
        background: $secondary;
        color: $primary;
      }

      &:hover:not(:disabled) {
        opacity: 0.9;
        transform: translateY(-2px);
        box-shadow: $shadow-xl;
      }
    }
  }

  // ── Related Products ───────────────────────────────────
  &__related {
    @include container;
    padding-bottom: $space-20;
  }

  &__related-title {
    font-family: $font-display;
    font-size: $fs-2xl;
    font-weight: 700;
    color: #111;
    margin-bottom: $space-8;
    text-align: center;
    :host-context(.dark) & { color: #fff; }
  }

  &__related-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: $space-6;

    @include respond($bp-md) { grid-template-columns: repeat(4, 1fr); }
  }

  &__related-card {
    @include card-base;
    border-radius: $radius-2xl;
    overflow: hidden;
    cursor: pointer;
  }

  &__related-img-wrap {
    overflow: hidden;
  }

  &__related-img {
    width: 100%;
    height: 10rem;
    object-fit: cover;
    transition: transform $transition-slow;

    .pd__related-card:hover & { transform: scale(1.08); }
  }

  &__related-body {
    padding: $space-4;
  }

  &__related-name {
    font-family: $font-display;
    font-size: $fs-base;
    font-weight: 700;
    color: #111;
    margin-bottom: $space-1;
    :host-context(.dark) & { color: #fff; }
  }

  &__related-price {
    font-weight: 700;
    color: $primary;
    font-size: $fs-sm;
  }
}
